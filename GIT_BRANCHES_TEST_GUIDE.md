# Git 分支功能测试指南

## 前置条件

1. VS Code 安装了 Issue Manager 扩展
2. 打开一个 Git 仓库作为工作区
3. 配置了 Issue 目录 (`issueManager.issueDir`)

## 测试步骤

### 1. 视图显示测试

#### 1.1 打开 Git 分支视图
- [ ] 在侧边栏找到 "问题管理" 视图容器
- [ ] 展开 "Git 分支" 视图
- [ ] 验证视图是否正确显示

#### 1.2 验证分支列表
- [ ] 查看是否显示所有分支（本地和远程）
- [ ] 验证分支按最后提交时间降序排列
- [ ] 检查当前分支是否显示为 `HEAD → <分支名>`
- [ ] 验证分支描述显示最后提交时间格式：`(last commit: YYYY-MM-DD)`

#### 1.3 验证父分支显示
- [ ] 展开一个分支节点
- [ ] 查看是否显示父分支列表
- [ ] 验证父分支名称是否正确

#### 1.4 验证多分支合并显示
- [ ] 如果多个分支指向同一提交，验证是否正确显示
- [ ] 验证格式是否符合：`<分支1>, <分支2>, ...`

### 2. 分支操作测试

#### 2.1 刷新功能
- [ ] 点击工具栏的刷新按钮
- [ ] 验证视图是否重新加载
- [ ] 验证显示的信息是否是最新的

#### 2.2 检出分支
- [ ] 在一个非当前分支上右键点击
- [ ] 选择 "检出分支"
- [ ] 验证是否成功切换到该分支
- [ ] 验证工作区文件是否更新
- [ ] 验证视图中 HEAD 标记是否更新

#### 2.3 创建分支
##### 从工具栏创建
- [ ] 点击工具栏的 "创建分支" 按钮
- [ ] 输入新分支名称（例如：`test/feature-1`）
- [ ] 验证是否成功创建并切换到新分支
- [ ] 验证新分支是否出现在视图中

##### 基于现有分支创建
- [ ] 在一个分支节点上右键点击
- [ ] 选择 "创建分支"
- [ ] 输入新分支名称（例如：`test/feature-2`）
- [ ] 验证是否成功创建并切换到新分支
- [ ] 验证新分支是否基于选中的分支

#### 2.4 删除分支
- [ ] 切换到其他分支
- [ ] 在要删除的本地分支上右键点击
- [ ] 选择 "删除分支"
- [ ] 在弹出的对话框中选择 "删除" 或 "强制删除"
- [ ] 验证分支是否被删除
- [ ] 验证视图中该分支是否消失

### 3. Issue 关联功能测试

#### 3.1 关联 Issue
- [ ] 在一个分支节点上右键点击
- [ ] 选择 "关联 Issue"
- [ ] 在快速创建对话框中输入 Issue 标题
- [ ] 验证是否成功创建 Issue 并关联
- [ ] 验证分支节点图标是否变为链接图标
- [ ] 验证信息提示是否正确显示

#### 3.2 打开关联的 Issue
- [ ] 点击已关联 Issue 的分支节点
- [ ] 验证是否打开了正确的 Issue 文件
- [ ] 验证文件内容是否正确

#### 3.3 取消关联
- [ ] 在已关联 Issue 的分支上右键点击
- [ ] 选择 "取消关联"
- [ ] 在确认对话框中点击 "确定"
- [ ] 验证关联是否被取消
- [ ] 验证分支节点图标是否恢复为普通图标

### 4. 错误处理测试

#### 4.1 非 Git 仓库
- [ ] 打开一个非 Git 仓库的工作区
- [ ] 验证 Git 分支视图是否为空或显示适当的提示

#### 4.2 删除当前分支
- [ ] 尝试删除当前分支
- [ ] 验证是否显示错误提示："不能删除当前分支"

#### 4.3 创建重复分支
- [ ] 尝试创建一个已存在的分支名
- [ ] 验证是否显示适当的错误信息

#### 4.4 无效分支名
- [ ] 尝试创建包含非法字符的分支名（如空格、特殊符号）
- [ ] 验证输入验证是否工作
- [ ] 验证错误提示是否清晰

### 5. 性能测试

#### 5.1 大型仓库
- [ ] 在包含大量分支的仓库中测试（如 > 50 个分支）
- [ ] 验证视图加载时间是否可接受
- [ ] 验证刷新操作是否流畅

#### 5.2 父分支查找
- [ ] 在复杂的分支拓扑中测试
- [ ] 验证父分支查找是否准确
- [ ] 验证性能是否可接受

## 已知限制

1. 父分支查找算法基于 Git 配置和 merge-base，可能在某些复杂情况下不完全准确
2. 远程分支不支持删除操作
3. 分支与 Issue 的关联存储在本地，不会同步到 Git 仓库

## 测试完成检查清单

- [ ] 所有基本功能测试通过
- [ ] 所有分支操作测试通过
- [ ] Issue 关联功能测试通过
- [ ] 错误处理符合预期
- [ ] 性能可接受
- [ ] UI 显示正确美观

## 问题报告

如果发现问题，请记录以下信息：
1. 测试步骤
2. 预期结果
3. 实际结果
4. VS Code 版本
5. 扩展版本
6. Git 仓库特征（分支数量、拓扑结构等）
