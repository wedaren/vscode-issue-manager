# 关于“最近问题”创建时间排序方案的讨论

## 背景

我们需要对“最近问题”列表进行排序，以便将最新的问题显示在最前面。目前主要有两种时间来源可以作为排序依据：

1.  **文件修改时间 (mtime)**: 文件系统记录的最后一次修改文件内容的时间。
2.  **文件名内嵌时间**: 我们大部分笔记文件都遵循 `YYYYMMDD-HHMMSS.md` 的格式，文件名本身就包含了精确的创建时间。

## 问题分析

### mtime 的不可靠性

当项目使用 Git 进行版本控制和协作时，`mtime` 会变得非常不可靠。具体表现为：

-   **`git clone` 或 `git pull`**: 当团队成员从远程仓库拉取更新时，本地文件的 `mtime` 会被更新为拉取操作发生的时间，而不是文件的原始创建或修改时间。
-   **切换分支**: 切换分支也可能导致工作区的文件被重写，从而更新 `mtime`。

因此，如果完全依赖 `mtime` 进行排序，不同成员、不同设备上看到的“最近问题”顺序可能会不一致，且无法反映真实的创建顺序。

### 文件名内嵌时间的优势

将时间戳直接嵌入文件名具有显著的优势：

-   **一致性**: 文件名是元数据的一部分，被 Git 精确管理。无论何时、何地 `clone` 或 `pull` 仓库，文件名都是不变的。这保证了排序依据的一致性。
-   **可靠性**: 文件名内的时间戳真实反映了文件的创建时刻（假设遵循了命名规范），不受文件系统操作的影响。
-   **人类可读**: 用户可以直观地从文件名中了解创建时间。

## 方案讨论与建议

考虑到 `mtime` 在 Git 环境下的不可靠性，我们应该优先使用文件名中内嵌的时间戳作为排序的主要依据。

**建议方案：**

1.  **主要排序依据**: 解析文件名（例如，通过正则表达式 `(d{8}-d{6})`）来提取时间戳字符串。
2.  **转换与排序**: 将提取的时间戳字符串转换为可比较的日期对象，并以此进行降序排序。
3.  **处理异常情况**: 对于不符合 `YYYYMMDD-HHMMSS.md` 命名规范的文件，需要定义一个回退策略。例如：
    *   将它们排在所有带时间戳文件的最前面或最后面。
    *   或者，尝试读取文件的 `mtime` 作为辅助排序依据，但要明确告知用户这部分排序可能不精确。

**结论：**

为了保证“最近问题”排序的准确性和跨设备一致性，**强烈建议采用解析文件名内嵌时间戳的方案**。我们应将此作为核心实现，并为不符合命名规范的文件设计合理的降级处理逻辑。
